var tempMon=angular.module("tempMon",["chart.js"]);tempMon.controller("ChartController",["$scope","TemperatureService",function(e,t){t.getMessungen().then(function(t){e.labels=t.labels,e.data=t.data,e.series=t.series}),e.onClick=function(e,t){console.log(e,t)}}]),tempMon.controller("NewestMeasurementController",["$scope","TemperatureService",function(e,t){t.getNewestMessung().then(function(t){e.tempInside=t.temperatur,e.tempRelInside=t.temperatur_gefuehlt,e.moistnessInside=t.feuchtigkeit,e.tempOutside=t.temperatur_aussen,e.moistnessOutside=t.feuchtigkeit_aussen})}]),tempMon.service("TemperatureService",["$http","$q",function(e,t){var n={};return n.url="http://home-ortiz.rhcloud.com/api/",n.getMessungen=function(){return e({method:"GET",url:this.url+"messungen"}).then(function(e){var t={};return t.labels=[],t.series=["Wohnzimmer","Gefuehlt","Aussen"],t.data=[[],[],[]],angular.forEach(e.data,function(e,n){var r=new Date(e.zeit);t.labels.push(r.getHours()+":"+(r.getMinutes()<10?"0":"")+r.getMinutes()),t.data[0].push(e.temperatur),t.data[1].push(e.temperatur_gefuehlt),e.temperatur_aussen?t.data[2].push(e.temperatur_aussen):t.data[2].push(0)}),t})},n.getNewestMessung=function(){return e({method:"GET",url:this.url+"messungen/current"}).then(function(e){return e.data})},n}]);